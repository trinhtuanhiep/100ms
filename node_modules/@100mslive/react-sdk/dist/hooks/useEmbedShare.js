import{__awaiter as r}from"../node_modules/tslib/tslib.es6.mjs.js";import{useRef as e,useState as o,useCallback as n,useEffect as t}from"react";import{useScreenShare as i}from"./useScreenShare.js";import c,{isChromiumBased as s}from"../utils/commons.js";const u=u=>{const a=e(null),[f,l]=o(!1),m=n((()=>{throw new Error("unable to start screen share")}),[]),d=e(!1),{amIScreenSharing:h,toggleScreenShare:S}=i(m),b=c(h),p=n((()=>r(void 0,void 0,void 0,(function*(){h&&(yield null==S?void 0:S(),a.current=null)}))),[h,S]),v=n((e=>r(void 0,void 0,void 0,(function*(){if(!d.current){if(!e)throw new Error("URL not found");if(h)throw new Error("You are already sharing");if(!a.current)throw new Error("Attach a reference `iframeRef` to iframe for sharing");a.current.src=e,d.current=!0,l(!0),yield null==S?void 0:S({forceCurrentTab:s,cropElement:a.current,preferCurrentTab:s})}}))),[h,S]);return t((()=>{b&&!h&&(null==u||u(),a.current&&(a.current.src=""),d.current=!1,l(!1))}),[h,b,u]),{startEmbedShare:v,stopEmbedShare:p,iframeRef:a,isEmbedShareInProgress:f}};export{u as useEmbedShare};
//# sourceMappingURL=useEmbedShare.js.map
