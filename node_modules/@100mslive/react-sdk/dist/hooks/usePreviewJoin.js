import{__awaiter as e}from"../node_modules/tslib/tslib.es6.mjs.js";import{useMemo as i,useCallback as o}from"react";import{selectRoomState as t,selectIsConnectedToRoom as n,HMSRoomState as a}from"@100mslive/hms-video-store";import{useHMSActions as r,useHMSStore as m}from"../primitives/HmsRoomProvider.js";import{logErrorHandler as s}from"../utils/commons.js";const c=({name:c="",token:d,metadata:v,handleError:l=s,initEndpoint:u,initialSettings:p,captureNetworkQualityInPreview:f,asRole:k,autoManageVideo:w,autoManageWakeLock:j})=>{const y=r(),g=m(t),h=m(n)||!1,b=g===a.Preview,M=i((()=>({userName:c,authToken:d,metaData:v,rememberDeviceSelection:!0,settings:p,initEndpoint:u,asRole:k,captureNetworkQualityInPreview:f,autoManageVideo:w,autoManageWakeLock:j})),[c,d,v,u,p,f,k,w,j]),P=o((()=>e(void 0,void 0,void 0,(function*(){if(d)try{(h||g!==a.Disconnected)&&(yield y.leave().catch((()=>{}))),yield y.preview(M)}catch(e){l(e,"preview")}}))),[d,h,g,y,M,l]);return{enableJoin:b,join:o((()=>e(void 0,void 0,void 0,(function*(){if(d)try{yield y.join(M)}catch(e){l(e,"join")}}))),[y,M,l,d]),isConnected:h,preview:P}};export{c as usePreviewJoin};
//# sourceMappingURL=usePreviewJoin.js.map
