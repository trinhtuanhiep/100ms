import{useMemo as t}from"react";import{useResizeDetector as e}from"react-resize-detector";import{selectTracksMap as i}from"@100mslive/hms-video-store";import{useHMSVanillaStore as r}from"../primitives/HmsRoomProvider.js";import{getVideoTracksFromPeers as o,getModeAspectRatio as a,calculateLayoutSizes as s,chunkElements as h}from"../utils/layout.js";const n={width:1,height:1},l=({peers:l,maxTileCount:m,maxColCount:g,maxRowCount:f,includeScreenShareForPeer:u=(()=>!1),aspectRatio:d=n,filterNonPublishingPeers:P=!0,offsetY:p=0})=>{const{width:c=0,height:C=0,ref:x}=e(),F=r().getState(i),H=o(l,F,u,P),W=t((()=>{if(d)return d;return{width:a(H)||1,height:1}}),[d,H]),w=H.length,{tilesInFirstPage:R,defaultWidth:v,defaultHeight:M,lastPageWidth:S,lastPageHeight:T,isLastPageDifferentFromFirstPage:j}=t((()=>s({count:w,parentWidth:Math.floor(c),parentHeight:Math.floor(C)-Math.min(C,p),maxTileCount:m,maxRowCount:f,maxColCount:g,aspectRatio:W})),[w,c,C,m,f,g,W,p]);return{pagesWithTiles:t((()=>h({elements:H,tilesInFirstPage:R,onlyOnePage:!1,isLastPageDifferentFromFirstPage:j,defaultWidth:v,defaultHeight:M,lastPageWidth:S,lastPageHeight:T})),[H,R,j,v,M,S,T]),ref:x}};export{l as useVideoList};
//# sourceMappingURL=useVideoList.js.map
