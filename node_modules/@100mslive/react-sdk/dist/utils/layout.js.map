{"version":3,"file":"layout.js","sources":["../../src/utils/layout.ts"],"sourcesContent":[null],"names":["chunk","elements","chunkSize","onlyOnePage","reduce","resultArray","tile","index","chunkIndex","Math","floor","push","chunkElements","tilesInFirstPage","isLastPageDifferentFromFirstPage","defaultWidth","defaultHeight","lastPageWidth","lastPageHeight","chunks","map","ch","page","element","isLastPage","length","width","height","Object","assign","mode","array","modeMap","maxEl","maxCount","i","el","getModeAspectRatio","tracks","filter","_a","track","_b","largestRect","containerWidth","containerHeight","numRects","Error","Number","isInteger","aspectRatio","isNaN","best","area","cols","rows","ceil","getTileSizesWithColConstraint","parentWidth","parentHeight","count","tilesinLastPage","min","sqrt","getTileSizesWithPageConstraint","initialWidth","initialHeight","remWidth","remHeight","getTileSizesWithRowConstraint","calculateLayoutSizes","maxTileCount","maxRowCount","maxColCount","getVideoTracksFromPeers","peers","includeScreenShareForPeer","filterNonPublishingPeers","peerTiles","peer","videoTrack","audioTrack","auxiliaryTracks","forEach","trackId","type","source","screenShareTrackID","find","trackID"],"mappings":"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"}